[gd_scene load_steps=12 format=2]

[ext_resource path="res://prefabs/Rogue.tscn" type="PackedScene" id=1]
[ext_resource path="res://scenes/game/Game.gd" type="Script" id=2]
[ext_resource path="res://scenes/game/GameCamera.gd" type="Script" id=3]
[ext_resource path="res://scenes/dice/Dice.tscn" type="PackedScene" id=6]
[ext_resource path="res://assets/misc/NumberFont.tres" type="DynamicFont" id=7]
[ext_resource path="res://assets/3d assets/Dungeon.tres" type="MeshLibrary" id=8]

[sub_resource type="NavigationMesh" id=1]
vertices = PoolVector3Array( -20.5, 10.4, -20.2, -21.4, 10.4, -21.4, -21.4, 10.4, -10.9, -20.5, 10.4, -10, -0.1, 10.4, 21.5, 10.7, 10.4, 21.5, 10.4, 10.4, 20.6, 0.199999, 10.4, 20.6, -10.9, 10.4, -21.4, -21.4, 10.4, -21.4, -20.5, 10.4, -20.2, -10.6, 10.4, -20.5, -10.9, 10.4, 21.5, -10, 10.4, 20.6, -20.2, 10.4, 20.6, -21.4, 10.4, 21.5, -20.5, 10.4, -10, -21.4, 10.4, -10.9, -21.4, 10.4, -0.0999985, -20.5, 10.4, 0.200001, -10, 10.4, 20.6, -10.9, 10.4, 21.5, -0.1, 10.4, 21.5, 0.199999, 10.4, 20.6, -0.1, 10.4, -21.4, -10.9, 10.4, -21.4, -10.6, 10.4, -20.5, -0.400002, 10.4, -20.5, -20.5, 10.4, 10.4, -20.5, 10.4, 0.200001, -21.4, 10.4, -0.0999985, -21.4, 10.4, 10.7, -0.1, 10.4, -21.4, -0.400002, 10.4, -20.5, 9.8, 10.4, -20.5, 10.7, 10.4, -21.4, 21.5, 10.4, -0.0999985, 20.6, 10.4, -0.4, 20.6, 10.4, 9.8, 21.5, 10.4, 10.7, 10.7, 10.4, -21.4, 9.8, 10.4, -20.5, 20.3, 10.4, -20.5, 21.5, 10.4, -21.4, 20.6, 10.4, 20.3, 21.5, 10.4, 21.5, 21.5, 10.4, 10.7, 20.6, 10.4, 9.8, 21.5, 10.4, -10.9, 21.5, 10.4, -21.4, 20.3, 10.4, -20.5, 20.6, 10.4, -10.6, 10.7, 10.4, 21.5, 21.5, 10.4, 21.5, 20.6, 10.4, 20.3, 10.4, 10.4, 20.6, 21.5, 10.4, -0.0999985, 21.5, 10.4, -10.9, 20.6, 10.4, -10.6, 20.6, 10.4, -0.4, -20.2, 10.4, 20.6, -20.5, 10.4, 10.4, -21.4, 10.4, 10.7, -21.4, 10.4, 21.5, -9.7, 0.4, -19.3, -19.3, 0.4, -19.3, -19.3, 0.4, -9.7, -19.3, 0.4, 9.5, -19.3, 0.4, 19.4, -9.7, 0.4, 19.4, 19.4, 0.4, -9.7, 19.4, 0.4, -19.3, 9.5, 0.4, -19.3, 9.5, 0.4, 19.4, 19.4, 0.4, 19.4, 19.4, 0.4, 9.5, -0.1, 0.4, -19.3, -9.7, 0.4, -19.3, -19.3, 0.4, -9.7, -19.3, 0.4, -0.0999985, -19.3, 0.4, 9.5, -9.7, 0.4, 19.4, -0.1, 0.4, 19.4, 19.4, 0.4, -0.0999985, 19.4, 0.4, -9.7, 9.5, 0.4, -19.3, -0.1, 0.4, -19.3, -0.1, 0.4, 19.4, 9.5, 0.4, 19.4, 19.4, 0.4, 9.5, -19.3, 0.4, -0.0999985, -19.3, 0.4, 9.5, -0.1, 0.4, 19.4, 19.4, 0.4, 9.5, 19.4, 0.4, -0.0999985, -0.1, 0.4, -19.3 )
polygons = [ PoolIntArray( 3, 2, 0 ), PoolIntArray( 0, 2, 1 ), PoolIntArray( 7, 6, 4 ), PoolIntArray( 4, 6, 5 ), PoolIntArray( 11, 10, 8 ), PoolIntArray( 8, 10, 9 ), PoolIntArray( 13, 12, 14 ), PoolIntArray( 14, 12, 15 ), PoolIntArray( 19, 18, 16 ), PoolIntArray( 16, 18, 17 ), PoolIntArray( 23, 22, 20 ), PoolIntArray( 20, 22, 21 ), PoolIntArray( 26, 25, 27 ), PoolIntArray( 27, 25, 24 ), PoolIntArray( 28, 31, 29 ), PoolIntArray( 29, 31, 30 ), PoolIntArray( 33, 32, 34 ), PoolIntArray( 34, 32, 35 ), PoolIntArray( 37, 36, 38 ), PoolIntArray( 38, 36, 39 ), PoolIntArray( 41, 40, 42 ), PoolIntArray( 42, 40, 43 ), PoolIntArray( 47, 46, 44 ), PoolIntArray( 44, 46, 45 ), PoolIntArray( 51, 50, 48 ), PoolIntArray( 48, 50, 49 ), PoolIntArray( 55, 54, 52 ), PoolIntArray( 52, 54, 53 ), PoolIntArray( 58, 57, 59 ), PoolIntArray( 59, 57, 56 ), PoolIntArray( 61, 60, 62 ), PoolIntArray( 62, 60, 63 ), PoolIntArray( 66, 65, 64 ), PoolIntArray( 69, 68, 67 ), PoolIntArray( 72, 71, 70 ), PoolIntArray( 75, 74, 73 ), PoolIntArray( 77, 76, 78 ), PoolIntArray( 78, 76, 79 ), PoolIntArray( 82, 81, 80 ), PoolIntArray( 84, 83, 85 ), PoolIntArray( 85, 83, 86 ), PoolIntArray( 89, 88, 87 ), PoolIntArray( 91, 90, 92 ), PoolIntArray( 92, 90, 93 ), PoolIntArray( 93, 90, 94 ), PoolIntArray( 94, 90, 95 ) ]

[sub_resource type="PlaneMesh" id=2]
size = Vector2( 40, 40 )
subdivide_width = 4
subdivide_depth = 4

[sub_resource type="ConcavePolygonShape" id=5]
data = PoolVector3Array( 20, 0, 20, 12, 0, 20, 20, 0, 12, 12, 0, 20, 12, 0, 12, 20, 0, 12, 12, 0, 20, 4, 0, 20, 12, 0, 12, 4, 0, 20, 4, 0, 12, 12, 0, 12, 4, 0, 20, -4, 0, 20, 4, 0, 12, -4, 0, 20, -4, 0, 12, 4, 0, 12, -4, 0, 20, -12, 0, 20, -4, 0, 12, -12, 0, 20, -12, 0, 12, -4, 0, 12, -12, 0, 20, -20, 0, 20, -12, 0, 12, -20, 0, 20, -20, 0, 12, -12, 0, 12, 20, 0, 12, 12, 0, 12, 20, 0, 4, 12, 0, 12, 12, 0, 4, 20, 0, 4, 12, 0, 12, 4, 0, 12, 12, 0, 4, 4, 0, 12, 4, 0, 4, 12, 0, 4, 4, 0, 12, -4, 0, 12, 4, 0, 4, -4, 0, 12, -4, 0, 4, 4, 0, 4, -4, 0, 12, -12, 0, 12, -4, 0, 4, -12, 0, 12, -12, 0, 4, -4, 0, 4, -12, 0, 12, -20, 0, 12, -12, 0, 4, -20, 0, 12, -20, 0, 4, -12, 0, 4, 20, 0, 4, 12, 0, 4, 20, 0, -4, 12, 0, 4, 12, 0, -4, 20, 0, -4, 12, 0, 4, 4, 0, 4, 12, 0, -4, 4, 0, 4, 4, 0, -4, 12, 0, -4, 4, 0, 4, -4, 0, 4, 4, 0, -4, -4, 0, 4, -4, 0, -4, 4, 0, -4, -4, 0, 4, -12, 0, 4, -4, 0, -4, -12, 0, 4, -12, 0, -4, -4, 0, -4, -12, 0, 4, -20, 0, 4, -12, 0, -4, -20, 0, 4, -20, 0, -4, -12, 0, -4, 20, 0, -4, 12, 0, -4, 20, 0, -12, 12, 0, -4, 12, 0, -12, 20, 0, -12, 12, 0, -4, 4, 0, -4, 12, 0, -12, 4, 0, -4, 4, 0, -12, 12, 0, -12, 4, 0, -4, -4, 0, -4, 4, 0, -12, -4, 0, -4, -4, 0, -12, 4, 0, -12, -4, 0, -4, -12, 0, -4, -4, 0, -12, -12, 0, -4, -12, 0, -12, -4, 0, -12, -12, 0, -4, -20, 0, -4, -12, 0, -12, -20, 0, -4, -20, 0, -12, -12, 0, -12, 20, 0, -12, 12, 0, -12, 20, 0, -20, 12, 0, -12, 12, 0, -20, 20, 0, -20, 12, 0, -12, 4, 0, -12, 12, 0, -20, 4, 0, -12, 4, 0, -20, 12, 0, -20, 4, 0, -12, -4, 0, -12, 4, 0, -20, -4, 0, -12, -4, 0, -20, 4, 0, -20, -4, 0, -12, -12, 0, -12, -4, 0, -20, -12, 0, -12, -12, 0, -20, -4, 0, -20, -12, 0, -12, -20, 0, -12, -12, 0, -20, -20, 0, -12, -20, 0, -20, -12, 0, -20 )

[sub_resource type="CubeMesh" id=4]
size = Vector3( 44, 10, 2 )

[sub_resource type="ConcavePolygonShape" id=6]
data = PoolVector3Array( -22, 5, 1, 22, 5, 1, -22, -5, 1, 22, 5, 1, 22, -5, 1, -22, -5, 1, 22, 5, -1, -22, 5, -1, 22, -5, -1, -22, 5, -1, -22, -5, -1, 22, -5, -1, 22, 5, 1, 22, 5, -1, 22, -5, 1, 22, 5, -1, 22, -5, -1, 22, -5, 1, -22, 5, -1, -22, 5, 1, -22, -5, -1, -22, 5, 1, -22, -5, 1, -22, -5, -1, 22, 5, 1, -22, 5, 1, 22, 5, -1, -22, 5, 1, -22, 5, -1, 22, 5, -1, -22, -5, 1, 22, -5, 1, -22, -5, -1, 22, -5, 1, 22, -5, -1, -22, -5, -1 )

[node name="Game" type="Navigation"]
script = ExtResource( 2 )

[node name="GameCamera" type="Spatial" parent="."]
transform = Transform( -1, 6.18173e-08, -6.18173e-08, 0, 0.707107, 0.707107, 8.74228e-08, 0.707107, -0.707107, 2.17108, 11.6904, -9.35857 )
script = ExtResource( 3 )

[node name="Camera" type="Camera" parent="GameCamera"]
current = true

[node name="NavigationMeshInstance" type="NavigationMeshInstance" parent="."]
transform = Transform( 0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, 0.707107, 0, 0, 0 )
navmesh = SubResource( 1 )

[node name="MeshInstance" type="MeshInstance" parent="NavigationMeshInstance"]
mesh = SubResource( 2 )
skeleton = NodePath("../..")
material/0 = null

[node name="StaticBody" type="StaticBody" parent="NavigationMeshInstance/MeshInstance"]

[node name="CollisionShape" type="CollisionShape" parent="NavigationMeshInstance/MeshInstance/StaticBody"]
shape = SubResource( 5 )

[node name="MeshInstance2" type="MeshInstance" parent="NavigationMeshInstance"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5, -21 )
mesh = SubResource( 4 )
skeleton = NodePath("../..")
material/0 = null

[node name="StaticBody" type="StaticBody" parent="NavigationMeshInstance/MeshInstance2"]

[node name="CollisionShape" type="CollisionShape" parent="NavigationMeshInstance/MeshInstance2/StaticBody"]
shape = SubResource( 6 )

[node name="MeshInstance3" type="MeshInstance" parent="NavigationMeshInstance"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5, 21 )
mesh = SubResource( 4 )
skeleton = NodePath("../..")
material/0 = null

[node name="StaticBody" type="StaticBody" parent="NavigationMeshInstance/MeshInstance3"]

[node name="CollisionShape" type="CollisionShape" parent="NavigationMeshInstance/MeshInstance3/StaticBody"]
shape = SubResource( 6 )

[node name="MeshInstance4" type="MeshInstance" parent="NavigationMeshInstance"]
transform = Transform( -8.9407e-08, 0, -1, 0, 1, 0, 1, 0, -8.9407e-08, 21, 5, 0 )
mesh = SubResource( 4 )
skeleton = NodePath("../..")
material/0 = null

[node name="StaticBody" type="StaticBody" parent="NavigationMeshInstance/MeshInstance4"]

[node name="CollisionShape" type="CollisionShape" parent="NavigationMeshInstance/MeshInstance4/StaticBody"]
shape = SubResource( 6 )

[node name="MeshInstance5" type="MeshInstance" parent="NavigationMeshInstance"]
transform = Transform( -8.9407e-08, 0, -1, 0, 1, 0, 1, 0, -8.9407e-08, -21, 5, 0 )
mesh = SubResource( 4 )
skeleton = NodePath("../..")
material/0 = null

[node name="StaticBody" type="StaticBody" parent="NavigationMeshInstance/MeshInstance5"]

[node name="CollisionShape" type="CollisionShape" parent="NavigationMeshInstance/MeshInstance5/StaticBody"]
shape = SubResource( 6 )

[node name="Control" type="Control" parent="."]
anchor_bottom = 1.0
margin_right = 566.0
mouse_filter = 2

[node name="ViewportContainer" type="ViewportContainer" parent="Control"]
margin_right = 362.0
margin_bottom = 725.0
mouse_filter = 2

[node name="DiceViewport" type="Viewport" parent="Control/ViewportContainer"]
size = Vector2( 360, 720 )
transparent_bg = true
handle_input_locally = false
render_target_update_mode = 3
physics_object_picking = true

[node name="Dice" parent="Control/ViewportContainer/DiceViewport" instance=ExtResource( 6 )]
transform = Transform( 0.99905, 0, 0.0435671, 0, 1, 0, -0.0435671, 0, 0.99905, 0.054884, -17.4209, -3.01232 )

[node name="ThrowButton" type="Button" parent="Control"]
anchor_right = 1.0
margin_right = -206.0
margin_bottom = 53.0
disabled = true
text = "Throw Dice"

[node name="ThrowCooldown" type="ProgressBar" parent="Control"]
margin_top = 59.0
margin_right = 360.0
margin_bottom = 78.0
mouse_filter = 2
max_value = 1.0
percent_visible = false

[node name="UpgradeButton" type="Button" parent="Control"]
margin_top = 78.0
margin_right = 124.0
margin_bottom = 137.0
text = "Upgade Die (10G)"

[node name="Button" type="Button" parent="Control"]
margin_left = 246.0
margin_top = 78.0
margin_right = 360.0
margin_bottom = 137.0
text = "Buy die (20G)"

[node name="GoldLabel" type="Label" parent="Control"]
margin_left = 124.0
margin_top = 78.0
margin_right = 246.0
margin_bottom = 137.0
custom_fonts/font = ExtResource( 7 )
text = "0"
align = 1
valign = 1

[node name="GridMap" type="GridMap" parent="."]
transform = Transform( 0.707107, 0, 0.707107, 0, 1, 0, -0.707107, 0, 0.707107, 0, -0.431112, 0 )
visible = false
mesh_library = ExtResource( 8 )
cell_size = Vector3( 4, 1, 4 )
cell_scale = 4.0
data = {
"cells": PoolIntArray( 0, 0, 12, 1, 0, 12, 2, 0, 12, 3, 0, 35, 65532, 0, 35, 65533, 0, 12, 65534, 0, 12, 65535, 0, 12, 327676, 0, 36, 0, 1, 12, 1, 1, 12, 2, 1, 12, 3, 1, 35, 65532, 1, 35, 65533, 1, 12, 65534, 1, 12, 65535, 1, 12, 327676, 1, 36, 0, 2, 12, 1, 2, 12, 2, 2, 12, 3, 2, 35, 65532, 2, 35, 65533, 2, 12, 65534, 2, 12, 65535, 2, 12, 327676, 2, 36, 0, 3, 39, 1, 3, 35, 2, 3, 35, 3, 3, 35, 65532, 3, 35, 65533, 3, 35, 65534, 3, 35, 65535, 3, 655399, 262144, 3, 41, 262145, 3, 36, 262146, 3, 36, 262147, 3, 36, 327676, 3, 36, 327677, 3, 36, 327678, 3, 36, 327679, 3, 655401, 0, 65532, 35, 1, 65532, 35, 2, 65532, 35, 3, 65532, 35, 65532, 65532, 35, 65533, 65532, 35, 65534, 65532, 35, 65535, 65532, 35, 327676, 65532, 36, 0, 65533, 12, 1, 65533, 12, 2, 65533, 12, 3, 65533, 35, 65532, 65533, 35, 65533, 65533, 12, 65534, 65533, 12, 65535, 65533, 12, 327676, 65533, 36, 0, 65534, 12, 1, 65534, 12, 2, 65534, 12, 3, 65534, 35, 65532, 65534, 35, 65533, 65534, 12, 65534, 65534, 12, 65535, 65534, 12, 327676, 65534, 36, 0, 65535, 12, 1, 65535, 12, 2, 65535, 12, 3, 65535, 35, 65532, 65535, 35, 65533, 65535, 12, 65534, 65535, 12, 65535, 65535, 12, 327676, 65535, 36 )
}
__meta__ = {
"_editor_clip_": 0,
"_editor_floor_": Vector3( 0, 0, 0 )
}

[node name="Rogue" parent="." instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -12.151, 0, 0.226863 )

[node name="Rogue2" parent="." instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -10.4332, -9.53674e-07, 3.53845 )

[node name="Rogue3" parent="." instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -10.2627, 0, -4.52818 )

[node name="SpawnPosition" type="Node" parent="."]

[node name="SpawnPosition1" type="Position3D" parent="SpawnPosition"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -12, 0, 12 )

[node name="SpawnPosition2" type="Position3D" parent="SpawnPosition"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 12, 0, 12 )

[node name="SpawnPosition3" type="Position3D" parent="SpawnPosition"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 12, 0, -12 )

[node name="SpawnPosition4" type="Position3D" parent="SpawnPosition"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -12, 0, -12 )

[connection signal="button_down" from="Control/ThrowButton" to="." method="_on_Throw_button_down"]
[connection signal="button_down" from="Control/UpgradeButton" to="." method="_on_UpgradeButton_button_down"]
[connection signal="button_down" from="Control/Button" to="." method="_on_Button_button_down"]
